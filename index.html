<!DOCTYPE html>
<html lang="es">
    <head>
        <title>Carita Sonriente</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <script id="math" src="https://cdn.jsdelivr.net/npm/mathjs@11.7.0/lib/browser/math.min.js"></script>
        <script src="./scripts/keyboard.js"></script>
        <link rel="stylesheet" type="text/css" href="./css/fractionstyles.css">
        <script>
            function solveFraction(param11, param12, param21, param22, paramOp){
                let a = param11 * param22;
                let b = param12 * param21;
                let c = (param12 == param22) ? param22 : param12 * param22;
                let d = (paramOp == 1) ? a + b : (a - b);
                let e = ((math.abs(d*c))/(math.gcd(((d<0)?d*-1:d),c)))/c;
                let f = ((math.abs(d*c))/(math.gcd(((d<0)?d*-1:d),c)))/d;
                let g = (e < 0 || f < 0 ) ? 0 : 1;
                return [a, b, c, d, e, f, g, math.abs(c), math.abs(d), math.abs(e), math.abs(f)]
            };
            /*
            variable map
            ——————————————————————————————————————————————————————————————————————
            11              21              a  op  b           d                e
            ——      ∓       ——      =       ————————  =    g  ——      =     g  ——
            12              22                  c              c                f
            ——————————————————————————————————————————————————————————————————————
            ——————————————————————————————————————————————————————————————————————
            A                C              E  op  F          RA                RC
            ——      ∓       ——      =       ————————  =    g  ——      =     g   ——
            B                D                  G             RB                RD
            ——————————————————————————————————————————————————————————————————————
                                                op                          g
                                                + = 1                       + = 1
                                                - = 0                       - = 0
            a = 0, b = 1, c = 2, d = 3, e = 4, f = 5, g = 6, c(abs) = 7, d(abs) = 8, e(abs) = 9, f(abs) = 10         
            */
            $(document).ready(function() {
                $("#compareButton").click(function() {
                    let _11 = $('#numberA').val();
                    let _12 = $('#numberB').val();
                    let _21 = $('#numberC').val();
                    let _22 = $('#numberD').val();
                    let _op = ($("input[name='operators']:checked").val() == "yes" ? 1 : 0);
                    var fractionResults = solveFraction(_11, _12, _21, _22, _op);
                    for(let i = 0; i<fractionResults.length; i++){
                        console.log(`${fractionResults[i]}\n`)
                    };
                    $('#numberE').val(fractionResults[0]);
                    $('#numberF').val(fractionResults[1]);
                    $('#numberG').val(fractionResults[2]);
                    $('#numberRA').val(fractionResults[8]);
                    $('#numberRB').val(fractionResults[2]);
                    $('#numberRC').val(fractionResults[9]);
                    $('#numberRD').val(fractionResults[10]);
                    $('.resultOperator').text((fractionResults[6]==1)?'+ ___________':'- ___________');
                    $('#my-image').show();
                });
                $("#clearButton").click(function() {
                    $('#numberA').val('');
                    $('#numberB').val('');
                    $('#numberC').val('');
                    $('#numberD').val('');
                    $('#numberE').val('');
                    $('#numberF').val('');
                    $('#numberG').val('');
                    $('#numberRA').val('');
                    $('#numberRB').val('');
                    $('#numberRC').val('');
                    $('#numberRD').val('');
                    $('#my-image').hide();
                });
            });
        </script>  
    </head>
    <body>
        <div class="row">
            <div id="fraction1" class="element">
                <label for="numberA">a</label>
                <input type="text" id="numberA" name="numberA" size="5" maxlength="5">
                <div id="container" style="left: 0;">
                    <div id="target-element">
                    </div>
                    <img id="my-image" width="220" src="media/weirdsmile.gif" alt="Image" style="display:none; position:absolute; z-index:1000; pointer-events:none; left: 6%; " >
                  </div>
                <p>___________</p>
                <label for="numberB">b</label>
                <input type="text" id="numberB" name="numberB" size="5" maxlength="5">
            </div>
            <br>
            <div id="fractionOperator" class="element">
                <label for="operatorAdd">+</label>
                <input type="radio" id="operatorAdd" name="operators" value="yes">
                <label for="operatorSubs">-</label>
                <input type="radio" id="operatorSubs" name="operators" value = "no">
            </div>
            <br>
            <div id="fraction2" class="element">
                <label for="numberC">c</label>
                <input type="text" id="numberC" name="numberC" size="5" maxlength="5">
                <p>___________</p>
                <label for="numberD">d</label>
                <input type="text" id="numberD" name="numberD" size="5" maxlength="5">
            </div>
            <br>
            <div id="fraction3" class="element">
                <label for="numberE">e</label>
                <input type="text" id="numberE" name="numberE" size="5" maxlength="5">
                <label for="numberF">f</label>
                <input type="text" id="numberF" name="numberF" size="5" maxlength="5">
                <p>___________</p>
                <label for="numberG">g</label>
                <input type="text" id="numberG" name="numberG" size="5" maxlength="5">
            </div>
            <br>
            <div id="fractionResult" class="element">
                <label for="numberRA">RA</label>
                <input type="text" id="numberRA" name="numberRA" size="5" maxlength="5">
                <p class="resultOperator">___________</p>
                <label for="numberRB">RB</label>
                <input type="text" id="numberRB" name="numberRB" size="5" maxlength="5">
            </div>
            <br>
            <div id="fractionResultSimplified" class="element">
                <label for="numberRC">RC</label>
                <input type="text" id="numberRC" name="numberRC" size="5" maxlength="5">
                <p class="resultOperator">___________</p>
                <label for="numberRD">RD</label>
                <input type="text" id="numberRD" name="numberRD" size="5" maxlength="5">
            </div>
            <br>
        </div>
        <button type="button" id="compareButton">Comparar</button>
        <button type="button" id="clearButton">Limpiar</button>
        <input type="text" id="my-input">

        
    </body>
</html>